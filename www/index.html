<!DOCTYPE html>
<html ng-app="RecordService">
<head>
    <title>Touba Voice Mobile</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="lib/js/jquery.mobile/jquery.mobile-1.3.2.css" />
    <link rel="stylesheet" href="lib/css/themes/touba-green.css" />
    <script src="bower_components/jquery/jquery.js"></script>
    <script src="lib/js/jquery.mobile/jquery.mobile-1.3.2.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/angular-resource/angular-resource.js"></script>
    <script src="lib/js/underscore/underscore-min.js"></script>

    <script type="text/javascript" src="cordova.js"></script>

    <script src="js/services.js"></script>
    <script src="js/controllers.js"></script>

</head>
<body >

<div data-role="page">
    <div data-role="header">
        <img src="img/logo.png" height="35" alt="Touba Voice">
        <a href="logout.html" class="ui-btn-right">Logout</a>
    </div>
    <div data-role="content" style="width: 70%;margin-left: 15%">
        <ul data-role="listview" data-inset="true">
            <li data-role="fieldcontain">
                <label for="email">Email address</label>
                <input id="email" type="text" placeholder="Email address" required autofocus/>
            </li>
            <li data-role="fieldcontain">
                <label for="password">Password</label>
                <input id="password" type="text" placeholder="Password" required/>
            </li>
        </ul>
        <button data-inline="true">
            Sign in
        </button>
        <a href="#player" data-icon="gear">Go PLAY!</a>
        <a href="#popupBasic" data-rel="popup">Open Popup</a>

        <div data-role="popup" id="popupBasic">
            <p>This is a completely basic popup, no options set.</p>
        </div>
    </div>
</div>

<!--Record List Page-->
<div id="player" data-role="page" ng-controller="PlayerController">
    <div data-role="header">
        <img src="img/logo.png" height="35" alt="Touba Voice">
        <a href="logout.html" class="ui-btn-right">Logout</a>
        <div data-role="navbar" data-iconpos="top">
            <ul>
                <li><a href="#" data-icon="grid">PLAYER</a></li>
                <li><a href="#recorder" data-icon="gear">RECORDER</a></li>
            </ul>
        </div>
    </div>
    <div data-role="content">
        <ul data-role="listview" data-filter="true">
            <li ng-repeat="record in records">
                <a href="#record-detail" data-transition="slide" ng-click="selectRecord(record.fileName)" value="{{record.name}}">{{record.name||record.fileName}}</a>
            </li>
        </ul>
    </div>
    <div data-role="footer" data-position="fixed">
        <!--p>{{records.length}} Records found</p-->
        <div data-role="navbar" data-iconpos="top">
            <ul>
                <li><a href="#" ng-click="deleteRecord(record.fileName)" data-icon="delete">Delete</a></li>
                <li><a href="#" ng-click="sendRecord(record.fileName)" data-icon="forward">Send</a></li>
            </ul>
        </div>
    </div>
</div>

<div id="recorder" data-role="page">
    <div data-role="header">
        <img src="img/logo.png" height="35" alt="Touba Voice">
        <a href="logout.html" class="ui-btn-right">Logout</a>
        <div data-role="navbar" data-iconpos="top">
            <ul>
                <li><a href="#player" data-icon="grid">PLAYER</a></li>
                <li><a href="#" data-icon="gear">RECORDER</a></li>
            </ul>
        </div>
    </div>
    <div data-role="content">
        <div ng-controller="RecordCtrl">
            {{recordPrepare()}}


            <div style="vertical-align:middle; text-align:center">
                <h4 style="text-align: center">{{data.fileName}}{{data.ext}}</h4>
                <img src="img/mic.jpg" style="max-height: 300px"/>
                <div  style="text-align: center"></div>
                <div id="message" style="text-align: center" class="h3">00:00</div>
                <div style="text-align: center; width: 100%" id="progressbar">
                </div>

            </div>
        </div>
        <div data-role="popup" id="modal-dialog" title="Record name">
            <form>
                <ul data-role="listview" data-inset="true">
                    <li data-role="fieldcontain">
                        <label for="name">Saving record as</label>
                        <input type="text"  ng-model="data.fileName" name="name" class="text ui-widget-content ui-corner-all" />
                    </li>
                    <button data-inline="true" onclick="$('#modal-dialog').dialog( 'close' );">Close</button>
                    <button data-inline="true" id="record" >OK</button>
                </ul>
            </form>

        </div>
        <!--button data-inline="true" onclick="$.mobile.changePage('#record-list')" ng-click="completeRecord(record.fileName)">
            Save
        </button-->
    </div>
    <div data-role="footer" data-position="fixed">
        <div data-role="navbar" data-iconpos="top">
            <ul>
                <li><a href="#modal-dialog" data-icon="delete" id="prepareRecord" data-rel="popup" data-position-to="window" data-role="button">RECORD</a></li>
                <li><a href="#"  data-icon="forward" id="stop">DONE</a></li>
            </ul>
        </div>
    </div>
</div>



<!--Record Detail Page-->
<div id="record-detail" data-role="page" ng-controller="PlayerController">
    <div data-role="header">
        <a href="#" data-icon="back" data-rel="back">Back</a>

        <h1>{{record.name}}</h1>
        <a href="#record-list" ng-click="saveRecord()" data-icon="check" class="ui-btn-right">Save</a>
    </div>
    <div data-role="content">
        <ul data-role="listview" data-inset="true">
            <li data-role="fieldcontain">
                <label for="name">Record name</label>
                <input id="name" type="text" ng-model="record.name"/>
            </li>
            <li data-role="fieldcontain">
                <label for="body">Body</label>
                <textarea id="body" cols="40" rows="8" ng-model="record"></textarea>
            </li>
            <li data-role="fieldcontain">
                <label for="size">Size</label>
                <input id="size" type="text" ng-model="record.size"/>
            </li>
            <li data-role="fieldcontain">
                <label for="fileName">Context</label>
                <input id="fileName" type="text" ng-model="record.fileName"/>
            </li>
            <li data-role="fieldcontain">
                <label for="date">Date</label>
                <input id="date" type="date" ng-model="record.date"/>
            </li>
        </ul>
        <button data-inline="true" onclick="$.mobile.changePage('#record-list')" ng-click="completeRecord(record.fileName)">
            Save
        </button>
    </div>
    <div data-role="footer" data-position="fixed">
        <p>Record ID: {{record.name||record.fileName}} / {{record.id}}</p>
    </div>
</div>

</body>
</html>
